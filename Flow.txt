End-to-End Container Deployment on AWS: ECR + ECS
Updated


ğŸ” Internal Architecture Flow
ğŸ”¹ What is ECR?
ğŸ”¹ What is ECS?
1ï¸âƒ£ EC2 Launch Type
2ï¸âƒ£ Fargate Launch Type
Node Base Image
ğŸ”¹ Why Do We Need to Create an ECS Cluster?
Step 2: Create Task Definition
Issue
ğŸ” What Happens Internally?
Step 1 â†’ Create EC2 (for build environment)

Step 2 â†’ Install Docker & AWS CLI

Step 3 â†’ Create ECR Repository

step 4 â†’ clone Repo on ec2

Step 4 â†’ Build Docker Image

Step 5 â†’ Authenticate & Push Image to ECR

Step 6 â†’ Create ECS Cluster (Fargate)

Step 7 â†’ Create Task Definition

Step 8 â†’ Create Service

Step 9 â†’ Configure Security Group

Step 10 â†’ Access Application via Public IP:8000

ğŸ” Internal Architecture Flow
Developer â†’ Docker Build â†’ ECR (Image Storage)
        â†“
ECS Task Definition â†’ ECS Cluster â†’ Fargate
        â†“
Container Running
        â†“
Security Group Allows Port 8000
        â†“
Application Accessible via Public IP

Create EC2 and ECR on aws install all prerequisites

ECR = Elastic Container Registry
ğŸ“ Clean Blog Structure (You Can Copy This)
ğŸš€ Introduction

In this blog, we will deploy a Node.js application on AWS using:

Docker

Amazon ECR

Amazon ECS (Fargate)

We will go from local build to production deployment step by step.

ğŸ”¹ What is ECR?

Amazon Elastic Container Registry (ECR) is a fully managed Docker image registry that stores container images securely inside AWS.

Think of it as Docker Hub inside AWS.

ğŸ”¹ What is ECS?

Amazon Elastic Container Service (ECS) is a container orchestration service that runs and manages Docker containers at scale.

Instead of running:

docker run


ECS manages infrastructure, scaling, and availability automatically.

ğŸ”¹ ECS Launch Types
1ï¸âƒ£ EC2 Launch Type

You manage EC2 instances.

2ï¸âƒ£ Fargate Launch Type

Serverless containers. AWS manages infrastructure.

In this blog, we use Fargate.

ğŸ”¹ Prerequisites

AWS Account

IAM User with ECR & ECS permissions

AWS CLI installed

Docker installed

ğŸ”¹ Step 1: Create ECR Repository

Create a private repository in ECR.

ğŸ”¹ Step 2: Authenticate to ECR
aws ecr get-login-password --region eu-west-1 | \
docker login --username AWS --password-stdin <account-id>.dkr.ecr.eu-west-1.amazonaws.com

ğŸ”¹ Step 3: Dockerfile
FROM node:12.2.0-alpine
WORKDIR /node
COPY . .
RUN npm install
RUN npm run test
EXPOSE 8000
CMD ["node","app.js"]

ğŸ”¹ Step 4: Build Image
docker build -t aws-services .

ğŸ”¹ Step 5: Tag Image
docker tag aws-services:latest <account-id>.dkr.ecr.eu-west-1.amazonaws.com/aws-services:latest

ğŸ”¹ Step 6: Push Image
docker push <account-id>.dkr.ecr.eu-west-1.amazonaws.com/aws-services:latest

ğŸ”¹ Step 7: Create ECS Cluster

Cluster is a logical group where tasks run.

Without cluster â†’ ECS doesnâ€™t know where to run containers.

ğŸ”¹ Step 8: Create Task Definition

Task definition defines:

Docker image

CPU & Memory

Port mapping

IAM roles

Networking

ğŸ”¹ Step 9: Create Service

Service keeps container running and manages scaling.

ğŸ”¹ Step 10: Configure Security Group

Allow inbound:

Port 8000
Source: 0.0.0.0/0

ğŸ”¹ Internal Working

When service starts:

ECS pulls image from ECR

Fargate creates container

Application starts

Security group allows traffic

App becomes publicly accessible

If container crashes â†’ ECS restarts automatically.

ğŸ§  Common Issue

If port not accessible:

Go to:

Task â†’ Networking â†’ ENI â†’ Security Group â†’ Add port 8000

ğŸ¯ Final Conclusion (Professional Ending)

â€œBy combining Docker, Amazon ECR, and Amazon ECS (Fargate), we can deploy scalable, production-ready containerized applications without managing servers manually. This architecture enables secure image storage, automated container orchestration, and high availability.â€
